(function(t){function e(e){for(var n,o,l=e[0],c=e[1],r=e[2],d=0,m=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,r||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,l=1;l<i.length;l++){var c=i[l];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},a={app:0},s=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/memes-visualisation-tool/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var r=0;r<l.length;r++)e(l[r]);var u=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0d71":function(t,e,i){"use strict";i("f56d")},"0f17":function(t,e,i){},1146:function(t,e,i){t.exports=i.p+"img/self-attention-text-2-text.ee902d63.png"},"21be":function(t,e,i){},4425:function(t,e,i){t.exports=i.p+"img/attention-formulation.34916441.png"},4979:function(t,e,i){},"547b":function(t,e,i){"use strict";i("ffbb")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("7a23");function a(t,e,i,a,s,o){var l=Object(n["n"])("Attention"),c=Object(n["n"])("SingleDemo"),r=Object(n["n"])("ComparisonDemo"),u=Object(n["n"])("Remarks");return Object(n["j"])(),Object(n["e"])("div",null,[Object(n["h"])(l),Object(n["h"])(c),Object(n["h"])(r),Object(n["h"])(u)])}var s=i("70cd"),o=i.n(s),l=i("b73e"),c=i.n(l),r=i("4425"),u=i.n(r),d=i("fdc6"),m=i.n(d),f=i("1146"),b=i.n(f),h=i("aee3"),p=i.n(h),g={class:"card border-dark m-4 p-1"},j=Object(n["g"])('<div class="card-header"> Introduction &amp; Motivation (Attention Is All You Need?) </div><div class="card-body"><span class="fs-5"><b>Introduction</b></span><div class="row align-items-center mt-2 mb-5"><div class="col-sm-6 fs-5" style="text-align:left;height:100%;"><span> In 2017, Google AI brought a storm to the Natural Language Processing (NLP) research field by introducing a new kind of deep learning architecture - &quot;Transformers&quot;. <br><br> In the highly-cited paper (&quot;Attention Is All You Need&quot;), Google AI detailed the <i>mathematical concepts</i> which drive this one-of-a-kind monster and make it so powerful for learning non-linearity relationships. <br><br> The proposed <b>transformer</b> architecture uses <i>multiple layers</i> of <i>self-attention mechanisms</i> (&quot;Multi-Head Attention&quot;). The self-attention mechanism allows researchers to draw some insights into the models&#39; learnt behavior. </span></div><div class="col-sm-6 fs-6"><img style="max-width:100%;" src="'+o.a+'"><br><span><i>From “Attention is all you need” paper by Vaswani, et al., 2017</i></span></div></div><div class="row align-items-center mb-3"><div class="col-sm-6"><img style="max-width:100%;" src="'+c.a+'"><br><span class="fs-6"><i>From “Attention is all you need” paper by Vaswani, et al., 2017. <br>Scaled dot-product attention formula.</i></span><br><br><img style="max-width:100%;" src="'+u.a+'"><br><span><i>From “Attention is all you need” paper by Vaswani, et al., 2017</i></span></div><div class="col-sm-6 fs-5" style="text-align:left;height:100%;"><span> A self-attention module takes in <i>n</i> inputs and returns <i>n</i> outputs. In essense, it is outputing a latent vector (representation) of the corresponding input features. The self-attention mechanism allows the input to interact with each other (&quot;self&quot;) and find out who they should pay attention to (&quot;attention&quot;). <i>This part is obtained from https://towardsdatascience.com/illustrated-self-attention-2d627e33b20a.</i></span></div></div><hr><span class="fs-5"><b>Existing Text2Text Visualisation</b></span><div class="row align-items-center mt-2 mb-5"><div class="col-sm-6 fs-5" style="text-align:left;height:100%;"><span> A popular visualisation of the self-attention mechanism is the use of <b>heatmaps</b>, where the brightness of an area represents the strength of the attention activations for a word pair. <br><br></span></div><div class="col-sm-6 fs-6"><img style="max-width:100%;" src="'+m.a+'"></div></div><div class="row align-items-center mb-3"><div class="col-sm-6"><img style="max-width:100%;" src="'+b.a+'"></div><div class="col-sm-6 fs-5" style="text-align:left;height:100%;"><span> Another popular visualisation of the self-attention mechanism can be seen on the figure to the right. The visualisation can be seen as a composition of two subfigures (left and right). <br><br> Starting from the right figure, this is a <b>static node and edge graph</b> where a node represents a word. As for the edges, it represents the strength of the attention that each word pays attention to. <br><br> Whereas for the left figure, it is an <b>interactive node and edge graph</b> for researchers to explore the attention connections of each node carefully. </span></div></div><hr><span class="fs-5"><b>Motivation</b></span><div class="mt-4 mb-2"><img width="75%" src="'+p.a+'"><br><br><span class="fs-6">From “VisualBERT: a simple and performant baseline for vision and language” paper by Vaswani, et al., 2017.</span><br><br></div><div class="mb-5" style="text-align:left;"><span class="fs-5"> Recently, there is rapid interests in adapting the <b>transformer</b> architecture for <b>visual-linguistic models</b>. However, there is a lack of tools and studies on the multimodal model&#39;s behaviors. Specifically, we are interested in learning the impact of these multimodal models on social tasks such as <b>multimodal hate speech detection</b>. <ul><li> Does the multimodal models learn the correct visual-text alignments/groundings? Specifically, we are looking at unique visual-text alignments in hateful memes detection (i.e. slurs alignments/groundings). </li><li> When comparing across the various multimodal models, can we discern the factors why model A outperforms model B (i.e. learns better visual-text alignments)? If not, could it be due to some inherit bias learnt? </li></ul></span></div></div>',2),v=[j];function O(t,e,i,a,s,o){return Object(n["j"])(),Object(n["e"])("div",g,v)}var _={name:"Attention"},y=i("6b0d"),x=i.n(y);const w=x()(_,[["render",O]]);var k=w,S=function(t){return Object(n["l"])("data-v-fcffe0e2"),t=t(),Object(n["k"])(),t},B={class:"card border-dark m-4 p-1"},I=S((function(){return Object(n["f"])("div",{class:"card-header"},"Visualisation Demonstrations (Single Demo)",-1)})),T={class:"card-body"},V=S((function(){return Object(n["f"])("hr",null,null,-1)})),E={class:"row mt-2"},M={class:"col-sm-2",style:{"border-right":"1px solid #cbcfd4"}},A={class:"col-sm-10"},R=S((function(){return Object(n["f"])("b",null,"Cross-Modality Visualisation",-1)})),C={class:"row"},$={class:"col-sm"},H={class:"col-sm"},D={class:"col-sm"};function P(t,e,i,a,s,o){var l=Object(n["n"])("SingleModelSelector"),c=Object(n["n"])("SingleMemeSelector"),r=Object(n["n"])("Image"),u=Object(n["n"])("Heatmap");return Object(n["j"])(),Object(n["e"])("div",B,[I,Object(n["f"])("div",T,[Object(n["h"])(l),V,Object(n["f"])("div",E,[Object(n["f"])("div",M,[Object(n["h"])(c)]),Object(n["f"])("div",A,[R,Object(n["h"])(r,{ref:"image",img_id:t.img_id,img_filepath:t.img_filepath,class:"mt-3 mb-3"},null,8,["img_id","img_filepath"]),Object(n["f"])("div",C,[Object(n["f"])("div",$,[(Object(n["j"])(),Object(n["e"])(n["a"],null,Object(n["m"])([0],(function(e){return Object(n["h"])(u,{key:e,ref_for:!0,ref:"heatmap_"+e,layer:t.layer,head:e,img_id:t.img_id,attention_filepath:t.attention_filepaths["VisualBERT"]},null,8,["layer","head","img_id","attention_filepath"])})),64))]),Object(n["f"])("div",H,[(Object(n["j"])(),Object(n["e"])(n["a"],null,Object(n["m"])([1],(function(e){return Object(n["h"])(u,{key:e,ref_for:!0,ref:"heatmap_"+e,layer:t.layer,head:e,img_id:t.img_id,attention_filepath:t.attention_filepaths["VisualBERT"]},null,8,["layer","head","img_id","attention_filepath"])})),64))]),Object(n["f"])("div",D,[(Object(n["j"])(),Object(n["e"])(n["a"],null,Object(n["m"])([2],(function(e){return Object(n["h"])(u,{key:e,ref_for:!0,ref:"heatmap_"+e,layer:t.layer,head:e,img_id:t.img_id,attention_filepath:t.attention_filepaths["VisualBERT"]},null,8,["layer","head","img_id","attention_filepath"])})),64))])])])])])])}var N={class:"canvas-wrapper"},q={ref:"imageCanvas",class:"canvas-overlay"};function L(t,e,i,a,s,o){return Object(n["j"])(),Object(n["e"])("div",null,[Object(n["f"])("div",N,[Object(n["f"])("canvas",q,null,512)])])}i("a9e3"),i("4de4"),i("d3b7");var W={name:"Image",props:{img_id:Number,img_filepath:String},data:function(){return{sample:7528,colors:["#a71e4a","#7d3a97","#483290","#2a92c6","#63b247","#cede35","#f3ee3c","#fabb18","#f35524"],infos:[]}},computed:{canvas:function(){return this.$refs["imageCanvas"]},ctx:function(){return this.canvas.getContext("2d")},item:function(){var t=this;return this.infos.filter((function(e){return e.image_id==t.img_id}))[0]}},mounted:function(){var t=this;console.log(Object({NODE_ENV:"production",BASE_URL:"/memes-visualisation-tool/"})),fetch("".concat("/memes-visualisation-tool/","sample_infos.json")).then((function(t){return t.json()})).then((function(e){t.infos=e,t.drawImage(t.img_filepath)}),(function(t){console.log("Error loading json:",t)}))},methods:{update:function(){var t=this;fetch("".concat("/memes-visualisation-tool/","sample_infos.json")).then((function(t){return t.json()})).then((function(e){t.infos=e,t.drawImage(t.img_filepath)}),(function(t){console.log("Error loading json:",t)}))},drawImage:function(t){var e=this;console.log(t);var i=new Image;i.src=t,i.onload=function(){e.canvas.height=i.height,e.canvas.width=i.width,e.ctx.drawImage(i,0,0),e.initial_state=i}},displayBoundingBox:function(t){for(var e=0;e<t.length;e++){var i=t[e],n=this.item["bbox"][i],a=parseInt(n[0]),s=parseInt(n[1]),o=parseInt(n[2])-a,l=parseInt(n[3])-s;this.ctx.beginPath(),this.ctx.strokeStyle=this.colors[e],this.ctx.globalAlpha=.2,this.ctx.lineWidth=3,this.ctx.rect(a,s,o,l),this.ctx.stroke()}this.ctx.globalAlpha=1},highlightBoundingBox:function(t,e){this.ctx.drawImage(this.initial_state,0,0);for(var i=0;i<t.length;i++){var n=t[i],a=this.item["bbox"][n];if(n==e){var s=parseInt(a[0]),o=parseInt(a[1]),l=parseInt(a[2])-s,c=parseInt(a[3])-o;this.ctx.beginPath(),this.ctx.strokeStyle=this.colors[i],n==e?(this.ctx.globalAlpha=1,this.ctx.lineWidth=5):(this.ctx.globalAlpha=.3,this.ctx.lineWidth=3),this.ctx.rect(s,o,l,c),this.ctx.stroke()}}},resetBoundingBox:function(){this.ctx.drawImage(this.initial_state,0,0)}}};i("0d71");const z=x()(W,[["render",L],["__scopeId","data-v-1938cedc"]]);var F=z,G={ref:"heatmap"};function J(t,e,i,a,s,o){return Object(n["j"])(),Object(n["e"])("div",G,null,512)}i("99af"),i("a630"),i("3ca3"),i("6062"),i("ddb0"),i("d81d"),i("a15b");var Y=i("5698"),U={name:"Heatmap",props:{attention_filepath:String,img_id:Number,layer:Number,head:Number},data:function(){return{margin:{top:20,right:10,bottom:30,left:60}}},computed:{width:function(){return 350-this.margin.left-this.margin.right},height:function(){return 410-this.margin.top-this.margin.bottom},item:function(){var t=this;return this.attentions.filter((function(e){return e.image_id==t.img_id}))[0]}},mounted:function(){this.svg=Y["e"](this.$refs.heatmap).append("svg").attr("width",this.width).attr("height",this.height).append("g").attr("transform","translate(".concat(this.margin.left,", ").concat(this.margin.top,")")),this.fetchHeatmap()},methods:{update:function(){this.svg.selectAll("*").remove(),this.fetchHeatmap()},fetchHeatmap:function(){var t=this;this.svg.append("text").attr("x",this.width/2/1.5).attr("y",this.height-30).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text("Layer ".concat(this.layer+1," Head ").concat(this.head+1)),fetch(this.attention_filepath).then((function(t){return t.json()})).then((function(e){t.attentions=e,t.displayHeatmap(t.layer,t.head)}),(function(t){console.log("Error loading json:",t)}))},formatHeatmap:function(t,e,i){for(var n=[],a=0;a<t.length;a++)for(var s=t[a],o=0;o<e.length;o++){var l=e[o],c={group:s,variable:l,value:i[a][o]};n.push(c)}return n},displayHeatmap:function(t,e){var i=this;this.data=this.formatHeatmap(this.item["x_labels"],this.item["y_labels"],this.item["scores"][t][e]);var n=Array.from(new Set(this.data.map((function(t){return t.group})))),a=Array.from(new Set(this.data.map((function(t){return t.variable})))),s=Y["c"]().range([0,this.width-60]).domain(n).padding(.05),o=this.svg.append("g").style("font-size",15).attr("transform","translate(0, ".concat(this.width,")")).call(Y["a"](s).tickSize(0)),l=Y["c"]().range([this.width,0]).domain(a).padding(.05),c=this.svg.append("g").style("font-size",15).call(Y["b"](l).tickSize(0));o.select(".domain").remove(),c.select(".domain").remove();var r=Y["d"]().domain([0,1]).range(["white","blue"]),u=function(t){var e=t.target;Y["e"](e).style("stroke","black").style("opacity",1);var n=Y["e"](e).attr("x-label");o.selectAll(".tick").each((function(t){n==t?(Y["e"](e).selectAll("text").style("fill","red"),i.$parent.mouseenter(i.item["x_labels"],t)):Y["e"](e).selectAll("text").style("fill","black")}));var a=Y["e"](e).attr("y-label");c.selectAll(".tick").each((function(t){a==t?Y["e"](e).selectAll("text").style("fill","red"):Y["e"](e).selectAll("text").style("fill","black")}))},d=function(t){Y["e"](t.target).style("stroke","none").style("opacity",.8),Y["f"]("text").style("fill","black"),i.$parent.mouseleave()};this.svg.selectAll().data(this.data,(function(t){return t.group+":"+t.variable})).join("rect").attr("x",(function(t){return s(t.group)})).attr("y",(function(t){return l(t.variable)})).attr("x-label",(function(t){return t.group})).attr("y-label",(function(t){return t.variable})).attr("rx",4).attr("ry",4).attr("width",s.bandwidth()).attr("height",l.bandwidth()).style("fill",(function(t){return r(t.value)})).style("stroke-width",4).style("stroke","none").style("opacity",.8).on("mouseover",u).on("mouseleave",d),this.$parent.displayBoundingBox(this.item["x_labels"])}}};i("9e64");const K=x()(U,[["render",J],["__scopeId","data-v-badf0b86"]]);var Q=K,X=function(t){return Object(n["l"])("data-v-536fd3e6"),t=t(),Object(n["k"])(),t},Z=X((function(){return Object(n["f"])("div",null,[Object(n["f"])("b",null,"Meme Selection")],-1)})),tt=["src"],et={key:0},it={key:0,type:"button",class:"btn btn-info m-1"},nt=["onClick"];function at(t,e,i,a,s,o){return Object(n["j"])(),Object(n["e"])("div",null,[Z,(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(t.samples,(function(e,i){return Object(n["j"])(),Object(n["e"])("div",{key:e,class:"mt-4 mb-4"},[Object(n["f"])("img",{class:"thumbnail",src:t.sample_filepaths[i]},null,8,tt),Object(n["f"])("div",null,[i!=t.selected_idx?(Object(n["j"])(),Object(n["e"])("b",et,"Similarity (SSIM): "+Object(n["o"])(t.similarities[t.samples[t.selected_idx]][e]),1)):Object(n["d"])("",!0)]),i==t.selected_idx?(Object(n["j"])(),Object(n["e"])("button",it,Object(n["o"])(e),1)):(Object(n["j"])(),Object(n["e"])("button",{key:1,type:"button",class:"btn btn-outline-dark m-1",onClick:function(t){return o.onSelect(i)}},Object(n["o"])(e),9,nt))])})),128))])}var st={name:"MemeSelector",components:{},data:function(){return{publicPath:"/memes-visualisation-tool/",sample_filepaths:["".concat("/memes-visualisation-tool/","images/07528.png"),"".concat("/memes-visualisation-tool/","images/46518.png"),"".concat("/memes-visualisation-tool/","images/80597.png"),"".concat("/memes-visualisation-tool/","images/84762.png")],samples:[7528,46518,80597,84762],similarities:{7528:{46518:.124,80597:.1,84762:.127},46518:{7528:.124,80597:.07,84762:.117},80597:{46518:.07,7528:.1,84762:.084},84762:{46518:.117,80597:.084,7528:.127}},selected_idx:0}},computed:{selected_sample:function(){return this.samples[this.selected_idx]},selected_sample_filepath:function(){return this.sample_filepaths[this.selected_idx]}},methods:{onSelect:function(t){this.selected_idx=t,this.$parent.showMeme(this.samples[this.selected_idx],this.sample_filepaths[this.selected_idx])}}};i("e20c");const ot=x()(st,[["render",at],["__scopeId","data-v-536fd3e6"]]);var lt=ot,ct=function(t){return Object(n["l"])("data-v-1ac5763a"),t=t(),Object(n["k"])(),t},rt={class:"mt-2 mb-2"},ut=ct((function(){return Object(n["f"])("div",null,[Object(n["f"])("b",null,"Model Selector")],-1)})),dt=["onClick"];function mt(t,e,i,a,s,o){return Object(n["j"])(),Object(n["e"])("div",null,[Object(n["f"])("div",rt,[ut,Object(n["f"])("div",null,[(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(t.models,(function(e,i){return Object(n["j"])(),Object(n["e"])("button",{key:e,class:Object(n["i"])([{"btn-light":i!=t.selected_idx,"btn-info":i==t.selected_idx},"btn m-1 mt-3 mb-3"]),type:"button",onClick:function(t){return o.onSelect(i)}},Object(n["o"])(e),11,dt)})),128))])])])}var ft={name:"ModelSelector",components:{},data:function(){return{models:["VisualBERT","VilBERT"],selected_idx:0}},computed:{model1:function(){return this.models[this.selected_idx]}},methods:{onSelect:function(t){this.selected_idx=t}}};i("7b0bd");const bt=x()(ft,[["render",mt],["__scopeId","data-v-1ac5763a"]]);var ht=bt,pt={name:"Demo",components:{Image:F,Heatmap:Q,SingleMemeSelector:lt,SingleModelSelector:ht},data:function(){return{layer:3,img_id:7528,img_filepath:"".concat("/memes-visualisation-tool/","images/07528.png"),comparison:!0,attention_filepaths:{VisualBERT:"".concat("/memes-visualisation-tool/","sample_attentions_visual_bert_coco.json"),VilBERT:"".concat("/memes-visualisation-tool/","sample_attentions_visual_bert.json")}}},methods:{mouseenter:function(t,e){this.$refs.image.highlightBoundingBox(t,e)},mouseleave:function(){this.$refs.image.resetBoundingBox()},displayBoundingBox:function(t){setTimeout(this.$refs.image.displayBoundingBox(t),6e3)},showMeme:function(t,e){console.log(t,e),console.log(this.$refs),this.img_id=t,this.img_filepath=e,this.$refs.image.update(),this.$refs.heatmap_0[0].update(),this.$refs.heatmap_1[0].update(),this.$refs.heatmap_2[0].update()}}};i("f3f2");const gt=x()(pt,[["render",P],["__scopeId","data-v-fcffe0e2"]]);var jt=gt,vt=i("2909"),Ot=function(t){return Object(n["l"])("data-v-f0a4b5f4"),t=t(),Object(n["k"])(),t},_t={class:"card border-dark m-4 p-1"},yt=Ot((function(){return Object(n["f"])("div",{class:"card-header"},"Visualisation Demonstrations (Model Comparison)",-1)})),xt={class:"card-body"},wt=Ot((function(){return Object(n["f"])("hr",null,null,-1)})),kt={class:"row mt-2"},St={class:"col-sm-4",style:{"border-right":"1px solid #cbcfd4"}},Bt={class:"col-sm-8"},It=Ot((function(){return Object(n["f"])("b",null,"Cross-Modality Visualisation",-1)})),Tt={class:"row"},Vt={class:"col-sm"},Et=Ot((function(){return Object(n["f"])("b",null,"VisualBERT",-1)})),Mt={class:"col-sm"},At=Ot((function(){return Object(n["f"])("b",null,"VilBERT",-1)}));function Rt(t,e,i,a,s,o){var l=Object(n["n"])("ComparisonModelSelector"),c=Object(n["n"])("ComparisonMemeSelector"),r=Object(n["n"])("Image"),u=Object(n["n"])("Heatmap");return Object(n["j"])(),Object(n["e"])("div",_t,[yt,Object(n["f"])("div",xt,[Object(n["h"])(l),wt,Object(n["f"])("div",kt,[Object(n["f"])("div",St,[Object(n["h"])(c)]),Object(n["f"])("div",Bt,[It,Object(n["h"])(r,{ref:"image",img_id:t.img_id,img_filepath:t.img_filepath,class:"mt-3 mb-3"},null,8,["img_id","img_filepath"]),Object(n["f"])("div",Tt,[Object(n["f"])("div",Vt,[Et,(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(Object(vt["a"])(Array(2).keys()),(function(e){return Object(n["j"])(),Object(n["c"])(u,{key:e,ref_for:!0,ref:"heatmap_"+e,layer:t.layer,head:e,img_id:t.img_id,attention_filepath:t.attention_filepaths["VisualBERT"]},null,8,["layer","head","img_id","attention_filepath"])})),128))]),Object(n["f"])("div",Mt,[At,(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(Object(vt["a"])(Array(2).keys()),(function(e){return Object(n["j"])(),Object(n["c"])(u,{key:e,ref_for:!0,ref:"heatmap_"+e,layer:t.layer,head:e,img_id:t.img_id,attention_filepath:t.attention_filepaths["VilBERT"]},null,8,["layer","head","img_id","attention_filepath"])})),128))])])])])])])}var Ct=function(t){return Object(n["l"])("data-v-617723e2"),t=t(),Object(n["k"])(),t},$t={class:"mt-2 mb-2"},Ht=Ct((function(){return Object(n["f"])("div",null,[Object(n["f"])("b",null,"1st Model Selector")],-1)})),Dt=["onClick"],Pt={class:"mb-2"},Nt=Ct((function(){return Object(n["f"])("div",null,[Object(n["f"])("b",null,"2nd Model Selector")],-1)})),qt=["onClick","disabled"];function Lt(t,e,i,a,s,o){return Object(n["j"])(),Object(n["e"])("div",null,[Object(n["f"])("div",$t,[Ht,Object(n["f"])("div",null,[(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(t.models,(function(e,i){return Object(n["j"])(),Object(n["e"])("button",{key:e,class:Object(n["i"])([{"btn-light":i!=t.model1_idx,"btn-info":i==t.model1_idx},"btn m-1 mt-3 mb-3"]),type:"button",onClick:function(t){return o.onModel1Select(i)}},Object(n["o"])(e),11,Dt)})),128))])]),Object(n["f"])("div",Pt,[Nt,Object(n["f"])("div",null,[(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(t.models,(function(e,i){return Object(n["j"])(),Object(n["e"])("button",{key:e,class:Object(n["i"])([{"btn-light":i!=t.model2_idx,"btn-info":i==t.model2_idx},"btn m-1 mt-3 mb-3"]),type:"button",onClick:function(t){return o.onModel2Select(i)},disabled:i==t.model1_idx},Object(n["o"])(e),11,qt)})),128))])])])}var Wt={name:"ModelSelector",components:{},data:function(){return{models:["VisualBERT","VilBERT"],model1_idx:0,model2_idx:1}},computed:{model1:function(){return this.models[this.model1_idx]}},methods:{onModel1Select:function(t){this.model1_idx=t},onModel2Select:function(t){this.model2_idx=t}}};i("98a8");const zt=x()(Wt,[["render",Lt],["__scopeId","data-v-617723e2"]]);var Ft=zt,Gt=function(t){return Object(n["l"])("data-v-a5b03d1c"),t=t(),Object(n["k"])(),t},Jt=Gt((function(){return Object(n["f"])("div",null,[Object(n["f"])("b",null,"Meme Selection")],-1)})),Yt=Gt((function(){return Object(n["f"])("div",{class:"row mt-3"},[Object(n["f"])("div",{class:"col-sm-5"},"Memes"),Object(n["f"])("div",{class:"col-sm-7"},"Comparison")],-1)})),Ut=Gt((function(){return Object(n["f"])("hr",null,null,-1)})),Kt={class:"row align-items-center mt-3 mb-3"},Qt={class:"col-sm-6"},Xt=["src"],Zt={key:0},te={key:1,type:"button",class:"btn btn-info m-1"},ee=["onClick"],ie={class:"col-sm-6"},ne=Gt((function(){return Object(n["f"])("br",null,null,-1)})),ae=Gt((function(){return Object(n["f"])("br",null,null,-1)})),se=Gt((function(){return Object(n["f"])("br",null,null,-1)})),oe={key:0};function le(t,e,i,a,s,o){var l=this;return Object(n["j"])(),Object(n["e"])("div",null,[Jt,Yt,Ut,(Object(n["j"])(!0),Object(n["e"])(n["a"],null,Object(n["m"])(t.samples,(function(e,i){return Object(n["j"])(),Object(n["e"])("div",{key:e},[Object(n["f"])("div",Kt,[Object(n["f"])("div",Qt,[Object(n["f"])("img",{class:"thumbnail",src:t.sample_filepaths[i]},null,8,Xt),i!=t.selected_idx?(Object(n["j"])(),Object(n["e"])("div",Zt,[Object(n["f"])("b",null,"Similarity (SSIM): "+Object(n["o"])(t.similarities[t.samples[t.selected_idx]][e]),1)])):Object(n["d"])("",!0),i==t.selected_idx?(Object(n["j"])(),Object(n["e"])("button",te,Object(n["o"])(e),1)):(Object(n["j"])(),Object(n["e"])("button",{key:2,type:"button",class:"btn btn-outline-dark m-1",onClick:function(t){return o.onSelect(i)}},Object(n["o"])(e),9,ee))]),Object(n["f"])("div",ie,[Object(n["f"])("b",null,"Label: "+Object(n["o"])(o.getSampleLabel(e)),1),ne,ae,Object(n["f"])("span",{class:Object(n["i"])({"text-danger":o.getDifference(e,"VisualBERT")})},"VisualBERT "+Object(n["o"])(t.labels_mapping[l.predictions[e]["VisualBERT"]]),3),se,Object(n["f"])("span",{class:Object(n["i"])({"text-danger":o.getDifference(e,"VilBERT")})}," VilBERT: "+Object(n["o"])(t.labels_mapping[l.predictions[e]["VilBERT"]]),3)])]),3!=i?(Object(n["j"])(),Object(n["e"])("hr",oe)):Object(n["d"])("",!0)])})),128))])}var ce={name:"MemeSelector",components:{},data:function(){return{publicPath:"/memes-visualisation-tool/",sample_filepaths:["".concat("/memes-visualisation-tool/","images/07528.png"),"".concat("/memes-visualisation-tool/","images/46518.png"),"".concat("/memes-visualisation-tool/","images/80597.png"),"".concat("/memes-visualisation-tool/","images/84762.png")],samples:[7528,46518,80597,84762],similarities:{7528:{46518:.124,80597:.1,84762:.127},46518:{7528:.124,80597:.07,84762:.117},80597:{46518:.07,7528:.1,84762:.084},84762:{46518:.117,80597:.084,7528:.127}},predictions:{7528:{label:1,VisualBERT:1,VilBERT:1},46518:{label:1,VisualBERT:0,VilBERT:1},80597:{label:1,VisualBERT:1,VilBERT:0},84762:{label:1,VisualBERT:0,VilBERT:0}},labels_mapping:{0:"Not Hateful",1:"Hateful"},selected_idx:0}},computed:{selected_sample:function(){return this.samples[this.selected_idx]},selected_sample_filepath:function(){return this.sample_filepaths[this.selected_idx]}},methods:{onSelect:function(t){this.selected_idx=t,this.$parent.showMeme(this.samples[this.selected_idx],this.sample_filepaths[this.selected_idx])},getSampleLabel:function(t){return this.labels_mapping[this.predictions[t]["label"]]},getDifference:function(t,e){return this.labels_mapping[this.predictions[t]["label"]]!=this.labels_mapping[this.predictions[t][e]]}}};i("95d1");const re=x()(ce,[["render",le],["__scopeId","data-v-a5b03d1c"]]);var ue=re,de={name:"Demo",components:{Image:F,Heatmap:Q,ComparisonModelSelector:Ft,ComparisonMemeSelector:ue},data:function(){return{layer:3,img_id:7528,img_filepath:"".concat("/memes-visualisation-tool/","images/07528.png"),attention_filepaths:{VisualBERT:"".concat("/memes-visualisation-tool/","sample_attentions_visual_bert_coco.json"),VilBERT:"".concat("/memes-visualisation-tool/","sample_attentions_visual_bert.json")}}},methods:{mouseenter:function(t,e){this.$refs.image.highlightBoundingBox(t,e)},mouseleave:function(){this.$refs.image.resetBoundingBox()},displayBoundingBox:function(t){setTimeout(this.$refs.image.displayBoundingBox(t),6e3)},showMeme:function(t,e){console.log(t,e),console.log(this.$refs),this.img_id=t,this.img_filepath=e,this.$refs.image.update(),this.$refs.heatmap_0[0].update(),this.$refs.heatmap_1[0].update()}}};i("8226");const me=x()(de,[["render",Rt],["__scopeId","data-v-f0a4b5f4"]]);var fe=me,be={class:"card border-dark m-4 p-1"},he=Object(n["f"])("div",{class:"card-header"},"Work-In-Progress (No time to finish ...)",-1),pe=Object(n["f"])("div",{class:"card-body"},[Object(n["f"])("div",{class:"mb-5",style:{"text-align":"left"}},[Object(n["f"])("span",{class:"fs-5"},[Object(n["f"])("ul",null,[Object(n["f"])("li",null," Increase the number of models for comparisons (should includes all BERT-based models) "),Object(n["f"])("li",null," Increase the number of similarity measures/metrics for grouping memes together ")])])])],-1),ge=[he,pe];function je(t,e,i,a,s,o){return Object(n["j"])(),Object(n["e"])("div",be,ge)}var ve={name:"Attention"};const Oe=x()(ve,[["render",je]]);var _e=Oe,ye={name:"App",components:{SingleDemo:jt,ComparisonDemo:fe,Attention:k,Remarks:_e}};i("547b");const xe=x()(ye,[["render",a]]);var we=xe;Object(n["b"])(we).mount("#app")},"70cd":function(t,e,i){t.exports=i.p+"img/transformer-architecture.2504552c.png"},7821:function(t,e,i){},"7b0bd":function(t,e,i){"use strict";i("a2e0")},"7c64":function(t,e,i){},8226:function(t,e,i){"use strict";i("0f17")},"95d1":function(t,e,i){"use strict";i("aa12")},"98a8":function(t,e,i){"use strict";i("7c64")},"9e64":function(t,e,i){"use strict";i("21be")},a2e0:function(t,e,i){},aa12:function(t,e,i){},aee3:function(t,e,i){t.exports=i.p+"img/visualbert-architecture.dd6cd049.png"},b73e:function(t,e,i){t.exports=i.p+"img/attention-detailed-view.90007889.png"},e20c:function(t,e,i){"use strict";i("7821")},f3f2:function(t,e,i){"use strict";i("4979")},f56d:function(t,e,i){},fdc6:function(t,e,i){t.exports=i.p+"img/self-attention-text-2-text-matrix.5cdaac41.jpeg"},ffbb:function(t,e,i){}});
//# sourceMappingURL=app.b190bd2e.js.map